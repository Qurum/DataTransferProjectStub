# DataTransferProjectStub

Это - искусственный проект, нужный, чтобы иллюстрировать работу менеджера зависимостей.    

Цель - сконвертировать данные из одного формата в другой формат. 
Взаимодействуют Провайдер, Ресолвер, Адаптер и Логгер. 
Провайдер поставляет данные; Ресолвер анализирует их и выбирает Адаптер входных/выходных данных; Адаптер непосредственно осуществляет конвертацию. 
Все они могут записать что-нибудь в лог с помощью Логгера.    

Взаимодействие происходит внутри класса Main. Он тоже может что-нибудь писать в лог.    

Вариант использования:    

```php
$main = new Main(
    new JsonProvider(),
    new Resolver(
        new JsonXmlAdapter(),
        new XmlJsonAdapter(),
        new IdentityAdapter()
    ),
    new EchoLogger()
);
$main->run();
```

Используемый здесь ресолвер отправляет JSON в XML и наоборот, а данные в любом другом формате оставляет как есть.    
Поскольку выбран провайдер, поставляющий JSON, результатом будут данные в XML.    

При этом логгер внедрён только в класс Main. 
Все остальные классы не смогут ничего писать в лог. 
Чтобы они смогли, нужно каким-то образом внедрить логгер и в них тоже.    

Этот код многословен. Кроме того, если понадобится изменить программу - например, заменить эхо-логгер на 
логгер в файл - понадобится вручную отследить все места, где внедряется логгер. 

### Использование менеджера зависимостей

Чтобы писать меньше кода, можно сконфигурировать автоматический контейнер зависимостей. 
Подключить какой-нибудь менеджер, создать файл в yaml и лишь единожды обратиться к контейнеру в коде.

```yaml
# возможная конфигурация profile1.yaml
services:
    ProviderInterface: JsonProvider
    ResolverInterface: Resolver
    LoggerInterface: EchoLogger
    app: Main
```

```php
// вариант использования в PHP
Container::getService('app')->run();
```

Менеджер сам создат все нужные объекты. 
Кроме того, он внедрит логгер не только в Main, но и во все классы, которым нужен логгер. Ещё можно создать несколько разных точек входа. 
Вдобавок менеджер даёт возможность профилировать программу. Чтобы получить код, который принимает данные из xml и ведёт лог в файле, достаточно написать что-нибудь вроде 

```yaml
# возможная конфигурация profile2.yaml
services:
    ProviderInterface: XmlProvider
    ResolverInterface: Resolver
    LoggerInterface: FileLogger
    app: Main
```
Контейнер зависимостей автоматически перестроится.
