# DataTransferProjectStub

Это - искусственный проект, нужный, чтобы иллюстрировать работу менеджера зависимостей.    

Цель - сконвертировать данные из одного формата в другой формат. 
Взаимодействуют Провайдер, Ресолвер, Адаптер и Логгер. 
Провайдер поставляет данные; Ресолвер анализирует их и выбирает Адаптер входных/выходных данных; Адаптер непосредственно осуществляет конвертацию. 
Все они могут записать что-нибудь в лог с помощью Логгера.    

Взаимодействие происходит внутри класса Main. Он тоже может что-нибудь писать в лог.    

### Код без менеджера зависимостей
Чтобы объяснить, почему с контейнером зависимостей хорошо, можно показать, почему без контейнера плохо.
Вот вариант программы, которая совершает описанные выше действия:    

```php
$main = new Main(
    new JsonProvider(),
    new Resolver(
        new JsonXmlAdapter(),
        new XmlJsonAdapter(),
        new IdentityAdapter()
    ),
    new EchoLogger()
);
$main->run();
```

Используемый здесь ресолвер отправляет JSON в XML и наоборот, а данные в любом другом формате оставляет как есть.    
Поскольку выбран провайдер, поставляющий JSON, результатом будут данные в XML.    

При этом логгер внедрён только в класс Main. Все остальные классы не смогут ничего писать в лог.
Чтобы они смогли, нужно каким-то образом внедрить логгер и в них тоже.    

Этот код многословен. Кроме того, он обременителен. Если понадобится изменить программу - например, заменить эхо-логгер на 
логгер в файл - понадобится вручную отследить все точки внедрения. Их может быть много.

### Использование менеджера зависимостей

Чтобы писать меньше кода, можно сконфигурировать автоматический контейнер зависимостей. 
Подключить какой-нибудь из менеджеров, создать ему конфиг в yaml и лишь единожды обратиться к контейнеру в коде.

```yaml
# возможная конфигурация. profile1.yaml
services:
    ProviderInterface: JsonProvider
    ResolverInterface: Resolver
    LoggerInterface: EchoLogger
    app: Main
```

```php
// вариант использования в PHP-коде
Container('profile1.yaml')::getService('app')->run();
```

Строчек кода стало меньше. Менеджер сам создаёт все нужные объекты и сам внедряет их, куда нужно. 
Причем он внедрит логгер не только в Main, но и во все классы, которым нужен логгер. 
Бонус - создать несколько разных точек входа становится проще.    

Кроме того, контейнер зависимостей позволяет профилировать программу. Чтобы получить  похожий код, который принимает данные из xml и ведёт лог в файле, достаточно написать аналогичный конфигурационный файл: 

```yaml
# другая конфигурация. profile2.yaml
services:
    ProviderInterface: XmlProvider
    ResolverInterface: Resolver
    LoggerInterface: FileLogger
    app: Main
```
Контейнер автоматически перестроится. 
